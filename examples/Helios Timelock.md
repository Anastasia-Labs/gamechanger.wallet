
# Cardano Example Dapp

## **Helios Timelock**

    Builds an Helios Smart Contract on the fly. First transaction will lock coins setting main staking key as owner, second one will be able to unlock it only after some time and using main spending key. Burner/Gift wallets not recommended. Timelock not exactly tested.


## Try it online: 

-  Visit [HTML5 Dapp](https://raw.githubusercontent.com/GameChangerFinance/gamechanger.wallet/main/examples/Helios%20Timelock.html)
-  Run [Standalone URL dapp connection](https://beta-wallet.gamechanger.finance/api/2/run/1-H4sIAAAAAAAAA61X227bOBD9FUEvaQGvo7vsvLlpd7u7aRvUKVCgKBa0RCXc6laJ2tgw8u97hpRs-lInKeogtsQZHs7MmSGHa1sKmXP7wn7Lc1G11o0oeF4l3-yRnfI2aUQtRVVC_qoTedparLR6zXnBGmldVqVsWCKtqrTkHbeyfDW2fhdNKy2Mly1EmG_dizy3CNdKKlG2VsulFOWtVTBRWq1k3-jlG19ZrLWq-5I3I6gkVZkCl-vZC26xRc4tWVldqaAErZpjTiZ5Y7VVASHMh42p1bVb-JqXaY8_tl51DeDP_xCZtO5ZnnPZWmUlrQbLFQU0eTreREFJ-BJOYBnJWwkhIiNXNYVMhwfvDZdA_fTx6ppJmELhupOyvjg_BwjL76pWXviO45ynvKjOWS3OU1bXNLGD7hqRJhN5mQje0vsBvlajOPHLhkNTCpYbmimTDHr_sbyjV5Y6PgsYD8KF52ahk6U8iqdh5EdhkmXTIF0E7iJxJsxLvEnkBY6f4tkP7IeRveAlz0QiWLMyFrjlct6H8bpb5CL5m69IW3G1p6fZ3FFLuqaB0fO8ku-7YrE_5XIrVtpIkR87FzrqQ4qQdIWhWeed7NrXWl9NgyxrquKv-Yf3KoLJHS8w6sLyxb80kotW2hdf1rYo8esiCA-jtb1YSWLCXsO4F2cJw7SxSdJY-T2uuwUcfMvau7d8efbywX7SXCPCRxC-PuAzsluqrqG4DlycD5nRpwjkd6oqL6uUtNYNr3OW8Fmev7jjy5tqLpsXZw6L_diJwohHQTTFd-w5MT2lURhmURJlyJCFw5ReEHsxMiYOPCcIIhfvYZRCH3LP0X_DjBCICifxe1nYoxq6WRxjxTD2_M1Yr-sA2QsWkE2DCVbyownGM_yRdZMoNGfj2Y_ciOPXjRKMuvE09j3C4IM9xjygAS-E9b5hi6diEEYRrPTx78LXKdl1ypbjswx7MrKARh63RVkfQaI88uLDSHoxWEiJC-gRHs1JMQu8oWY3jJDVBj8JfMjom5iLJ8onH89eNI1hSeCTlWrdCZiFrV7qw_bAwzgyYJffDQJ-PewRA6rHlcTMBE4MaV3NvNYftIccgx0u5R3knHJMxTDwVc6Zq3oc9vrQpzgr5qMAGUrxNnz3uJEXFPckhgfexNnLsGdiHueZYgXRIbb2Hf5SDpg4B5wac6ea3X0ssK0Z0nUXhpPADdLQCRI8Z0EQuCEeAkQW-7tRlRTr7bvJ4cCHz3ymIhV7kwDsg4c0pgoON4xNPcPCY5VgYni-7_iujx8_8FWK-RMfsUKIfEQh-vXS59oH_gLgIeP8KRCgALQAqB7QnV8vHTh12NnL0dmbJSvqnFMjcTY6o3OFdveRXbOGFRxNAo6IL_abz7N311dv_nk9u_n0zv6KQw4C3W85Yzcce_bBWTBL04a3ZpuwoM5sGB7ZJfCpeTg2aYTWIFWHr2qK9DHSnz6njqwdsHFrTtNuqdbk2jzMTsLtNjLq3FOnnnLlitrPPfdullvPSI4G4-YzdWJL0qw6WXeyVec4G-LzRG_60Gg3Ng2FenjEC6VD32xz-tusRWerDakr9D-rP1PVj1FDomTvtQ965HvHEAC5OrUKNUO6MRjZIt02mNSe8vSD8lwJG_69E4jpXNyWKr3WQ3f2_DZGZR1w9qigoZvlkGRbW2icp7_19wa5VLltLrrhdSyX_Rpf6YIhmch5es2bQrSU95iYsbzltHy3KITcN0ANHjVBSeSeFTtGDA71VN0zYTZWTL2P7A6MqNbaaNOoigdLkHpEKV00GqVOKLa-rLTbNtV1tgn9SV1XTqW01thNainzoX09mR_7rXXvnig3JYGYg9s9kB1KINYFAOcOkn6rqaTvWD3WBTc2c3DI0SNpuHOl-Nm-GIQJWaJS9RVJ98G6p6fdSHva70w_sZkNG1nOytunTybtoWvHlULdlZVRSZXnDKnJ8kvU75znPOnv0Vez-dXs9bbEDpLjkSLTd98TZaYBn1toh2Y8odR2bTkoNo3Zs5eJErdt8065ud7yZV01ctb2e_usTD_iaODF9uZLOOaRV7CkqQbxj8lS0_r1f3SheiLUiaTZB9fF9ksW2Mn_R9qAn1nHOPywAIXrZvkkyGO7xwPths_F2GbrgEKf_wGBrL8MlxIAAA)

## Source code:

- dapp connection code: [GCScript](Helios%20Timelock.gcscript)
- frontend + dapp connection code : [HTML5 dapp](Helios%20Timelock.html)

Dapp code was autogenerated by [Playground IDE in GameChanger Wallet ](https://beta-wallet.gamechanger.finance/playground)

## GCScript code (dapp connection):
```json
{
  "title": "Helios Timelock",
  "description": "Builds an Helios Smart Contract on the fly. First transaction will lock coins setting main staking key as owner, second one will be able to unlock it only after some time and using main spending key. Burner/Gift wallets not recommended. Timelock not exactly tested.",
  "type": "script",
  "returnURLPattern": "http://localhost:3000/demo/api/dapp",
  "run": {
    "dependencies": {
      "type": "script",
      "run": {
        "stakeCredential": {
          "type": "data",
          "value": "ad03a4ae45b21f50fde67956365cff94db41bc08a2c2862403d8a234"
        },
        "beneficiary": {
          "type": "getSpendingPublicKey"
        },
        "owner": {
          "type": "getStakingPublicKey"
        },
        "currentSlotNumber": {
          "type": "getCurrentSlot"
        },
        "coin": {
          "type": "data",
          "value": "5000000"
        },
        "datum": {
          "type": "plutusData",
          "data": {
            "fromJSON": {
              "schema": 1,
              "obj": {
                "list": [
                  {
                    "int": 1234
                  },
                  {
                    "bytes": "{get('cache.dependencies.owner.pubKeyHashHex')}"
                  },
                  {
                    "bytes": "{get('cache.dependencies.beneficiary.pubKeyHashHex')}"
                  }
                ]
              }
            }
          }
        },
        "smartContract": {
          "type": "plutusScript",
          "script": {
            "heliosCode": "{replaceAll(hexToStr('0a7370656e64696e672074696d655f6c6f636b0a0a73747275637420446174756d207b0a202020206c6f636b556e74696c3a20202054696d650a202020206f776e65723a202020202020205075624b657948617368202f2f20746865206f776e65722063616e20616c7761797320756e6c6f636b20746865206173736574730a2020202062656e65666963696172793a205075624b657948617368202f2f2062656e65666963696172792063616e206f6e6c7920756e6c6f636b207468652061737365747320616674657220276c6f636b556e74696c270a7d0a0a66756e63206d61696e28646174756d3a20446174756d2c205f2c206374783a20536372697074436f6e7465787429202d3e20426f6f6c207b0a2020202074783a205478203d206374782e74783b0a202020206e6f773a2054696d65203d2074782e74696d655f72616e67652e73746172743b0a0a2020202074782e69735f7369676e65645f627928646174756d2e6f776e657229207c7c20280a202020202020202074782e69735f7369676e65645f627928646174756d2e62656e6566696369617279292026260a20202020202020206e6f77203e20646174756d2e6c6f636b556e74696c0a20202020290a7d0a20202020202020200a636f6e7374204558414d504c455f444154554d203a446174756d203d20446174756d7b0a2020202054696d653a3a6e6577284578616d706c6554696d65292c0a202020205075624b6579486173683a3a6e657728233031323334353637383961626364663031323334353637383961626364663031323334353637383961626364663031323334353637383961292c0a202020205075624b6579486173683a3a6e657728236664636261393837363534333231306664636261393837363534333231306664636261393837363534333231306664636261393837363534290a7d0a0a'),'ExampleTime','1234')}",
            "parameters": [
              "EXAMPLE_DATUM"
            ],
            "version": "0.15.2"
          }
        },
        "smartContractAddress": {
          "type": "buildAddress",
          "name": "smartContractAddress",
          "addr": {
            "spendScriptHashHex": "{get('cache.dependencies.smartContract.scriptHashHex')}",
            "stakePubKeyHashHex": "{get('cache.dependencies.stakeCredential')}"
          }
        }
      }
    },
    "buildLock": {
      "type": "buildTx",
      "name": "LockingTX",
      "tx": {
        "outputs": [
          {
            "address": "{get('cache.dependencies.smartContractAddress')}",
            "datum": {
              "datumHex": "{get('cache.dependencies.datum.dataHex')}"
            },
            "assets": [
              {
                "policyId": "ada",
                "assetName": "ada",
                "quantity": "{get('cache.dependencies.coin')}"
              }
            ],
            "idPattern": "lockedOutput"
          }
        ],
        "requiredSigners": {
          "owner": "{get('cache.dependencies.owner.pubKeyHashHex')}"
        }
      }
    },
    "signLock": {
      "type": "signTxs",
      "namePattern": "signed-lock",
      "txs": [
        "{get('cache.buildLock.txHex')}"
      ],
      "detailedPermissions": false
    },
    "submitLock": {
      "type": "submitTxs",
      "namePattern": "submitted-lock",
      "txs": "{get('cache.signLock')}"
    },
    "wait": {
      "type": "await",
      "until": {
        "beneficiaryTimeLock": {
          "kind": "timer",
          "unit": "seconds",
          "value": 10
        }
      }
    },
    "buildUnlock": {
      "type": "buildTx",
      "name": "UnlockingTX",
      "tx": {
        "ttl": {
          "from": "{get('cache.dependencies.currentSlotNumber')}"
        },
        "inputs": [
          {
            "txHash": "{get('cache.buildLock.txHash')}",
            "index": "{get('cache.buildLock.indexMap.output.lockedOutput')}"
          }
        ],
        "requiredSigners": {
          "beneficiary": "{get('cache.dependencies.beneficiary.pubKeyHashHex')}"
        },
        "witnesses": {
          "plutus": {
            "scripts": [
              {
                "scriptHex": "{get('cache.dependencies.smartContract.scriptHex')}",
                "lang": "{get('cache.dependencies.smartContract.lang')}"
              }
            ]
          }
        },
        "options": {
          "collateralCoinSelection": "LASLAD"
        }
      }
    },
    "signUnlock": {
      "type": "signTxs",
      "namePattern": "signed-unlock",
      "txs": [
        "{get('cache.buildUnlock.txHex')}"
      ],
      "detailedPermissions": false
    },
    "submitUnlock": {
      "type": "submitTxs",
      "namePattern": "submitted-unlock",
      "txs": "{get('cache.signUnlock')}"
    },
    "finally": {
      "type": "script",
      "exportAs": "LockAndRedeem",
      "run": {
        "locks": {
          "type": "macro",
          "run": "{get('cache.dependencies.locks')}"
        },
        "smartContract": {
          "type": "macro",
          "run": "{get('cache.dependencies.smartContract.scriptHex')}"
        },
        "smartContractHash": {
          "type": "macro",
          "run": "{get('cache.dependencies.smartContract.scriptHashHex')}"
        },
        "smartContractAddress": {
          "type": "macro",
          "run": "{get('cache.dependencies.smartContractAddress')}"
        },
        "lockTx": {
          "type": "macro",
          "run": "{get('cache.buildLock.txHash')}"
        },
        "unlockTx": {
          "type": "macro",
          "run": "{get('cache.buildUnlock.txHash')}"
        }
      }
    }
  }
}
```

## Run standalone QR dapp connection: 

You can use [Playground IDE in GameChanger Wallet ](https://beta-wallet.gamechanger.finance/playground) in `QR URL Transport` mode to capture results

[![QR URL Transport](Helios%20Timelock.png)](https://beta-wallet.gamechanger.finance/api/2/run/1-H4sIAAAAAAAAA61X227bOBD9FUEvaQGvo7vsvLlpd7u7aRvUKVCgKBa0RCXc6laJ2tgw8u97hpRs-lInKeogtsQZHs7MmSGHa1sKmXP7wn7Lc1G11o0oeF4l3-yRnfI2aUQtRVVC_qoTedparLR6zXnBGmldVqVsWCKtqrTkHbeyfDW2fhdNKy2Mly1EmG_dizy3CNdKKlG2VsulFOWtVTBRWq1k3-jlG19ZrLWq-5I3I6gkVZkCl-vZC26xRc4tWVldqaAErZpjTiZ5Y7VVASHMh42p1bVb-JqXaY8_tl51DeDP_xCZtO5ZnnPZWmUlrQbLFQU0eTreREFJ-BJOYBnJWwkhIiNXNYVMhwfvDZdA_fTx6ppJmELhupOyvjg_BwjL76pWXviO45ynvKjOWS3OU1bXNLGD7hqRJhN5mQje0vsBvlajOPHLhkNTCpYbmimTDHr_sbyjV5Y6PgsYD8KF52ahk6U8iqdh5EdhkmXTIF0E7iJxJsxLvEnkBY6f4tkP7IeRveAlz0QiWLMyFrjlct6H8bpb5CL5m69IW3G1p6fZ3FFLuqaB0fO8ku-7YrE_5XIrVtpIkR87FzrqQ4qQdIWhWeed7NrXWl9NgyxrquKv-Yf3KoLJHS8w6sLyxb80kotW2hdf1rYo8esiCA-jtb1YSWLCXsO4F2cJw7SxSdJY-T2uuwUcfMvau7d8efbywX7SXCPCRxC-PuAzsluqrqG4DlycD5nRpwjkd6oqL6uUtNYNr3OW8Fmev7jjy5tqLpsXZw6L_diJwohHQTTFd-w5MT2lURhmURJlyJCFw5ReEHsxMiYOPCcIIhfvYZRCH3LP0X_DjBCICifxe1nYoxq6WRxjxTD2_M1Yr-sA2QsWkE2DCVbyownGM_yRdZMoNGfj2Y_ciOPXjRKMuvE09j3C4IM9xjygAS-E9b5hi6diEEYRrPTx78LXKdl1ypbjswx7MrKARh63RVkfQaI88uLDSHoxWEiJC-gRHs1JMQu8oWY3jJDVBj8JfMjom5iLJ8onH89eNI1hSeCTlWrdCZiFrV7qw_bAwzgyYJffDQJ-PewRA6rHlcTMBE4MaV3NvNYftIccgx0u5R3knHJMxTDwVc6Zq3oc9vrQpzgr5qMAGUrxNnz3uJEXFPckhgfexNnLsGdiHueZYgXRIbb2Hf5SDpg4B5wac6ea3X0ssK0Z0nUXhpPADdLQCRI8Z0EQuCEeAkQW-7tRlRTr7bvJ4cCHz3ymIhV7kwDsg4c0pgoON4xNPcPCY5VgYni-7_iujx8_8FWK-RMfsUKIfEQh-vXS59oH_gLgIeP8KRCgALQAqB7QnV8vHTh12NnL0dmbJSvqnFMjcTY6o3OFdveRXbOGFRxNAo6IL_abz7N311dv_nk9u_n0zv6KQw4C3W85Yzcce_bBWTBL04a3ZpuwoM5sGB7ZJfCpeTg2aYTWIFWHr2qK9DHSnz6njqwdsHFrTtNuqdbk2jzMTsLtNjLq3FOnnnLlitrPPfdullvPSI4G4-YzdWJL0qw6WXeyVec4G-LzRG_60Gg3Ng2FenjEC6VD32xz-tusRWerDakr9D-rP1PVj1FDomTvtQ965HvHEAC5OrUKNUO6MRjZIt02mNSe8vSD8lwJG_69E4jpXNyWKr3WQ3f2_DZGZR1w9qigoZvlkGRbW2icp7_19wa5VLltLrrhdSyX_Rpf6YIhmch5es2bQrSU95iYsbzltHy3KITcN0ANHjVBSeSeFTtGDA71VN0zYTZWTL2P7A6MqNbaaNOoigdLkHpEKV00GqVOKLa-rLTbNtV1tgn9SV1XTqW01thNainzoX09mR_7rXXvnig3JYGYg9s9kB1KINYFAOcOkn6rqaTvWD3WBTc2c3DI0SNpuHOl-Nm-GIQJWaJS9RVJ98G6p6fdSHva70w_sZkNG1nOytunTybtoWvHlULdlZVRSZXnDKnJ8kvU75znPOnv0Vez-dXs9bbEDpLjkSLTd98TZaYBn1toh2Y8odR2bTkoNo3Zs5eJErdt8065ud7yZV01ctb2e_usTD_iaODF9uZLOOaRV7CkqQbxj8lS0_r1f3SheiLUiaTZB9fF9ksW2Mn_R9qAn1nHOPywAIXrZvkkyGO7xwPths_F2GbrgEKf_wGBrL8MlxIAAA)

## Resources
- [GCScript documentation](https://beta-wallet.gamechanger.finance/doc/api/v2/api.html)
- [Playground IDE in GameChanger Wallet ](https://beta-wallet.gamechanger.finance/playground)
- [Youtube Tutorials](https://www.youtube.com/@gamechanger.finance)
- [Discord Support](https://discord.gg/vpbfyRaDKG)
- [Twitter News](https://twitter.com/GameChangerOk)
- [Website](https://gamechanger.finance)

## License
MIT 
    
