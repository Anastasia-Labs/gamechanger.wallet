
# Cardano Example Dapp

## **Shared Treasury - 3 of 4 signers - funded - Gift Wallets**

Creates a workspace named 'DAO' with a 'Shared Treasury' address where at least 3 of 4 signer wallets are required for spending and staking operations. A second address on the workspace is caller main address as 'Signer'. To manage the treasury set 'Shared Treasury' address as current. To sign as a member, set 'Signer' address instead. Customize Gift Wallet generation with proper password settings and distribute them to the signers. This example is not secure as wallet creator has total control over the generated wallets. Please use 'saveConfig' function to save this setup on GCFS to avoid losing funds and data


## Try it online: 

-  Visit [HTML5 Dapp](https://gamechangerfinance.github.io/gamechanger.wallet/examples/Shared%20Treasury%20-%203%20of%204%20signers%20-%20funded%20-%20Gift%20Wallets.html)
-  Run [Standalone URL dapp connection](https://beta-wallet.gamechanger.finance/api/2/run/1-H4sIAAAAAAAAA7VX227jNhD9FVZF4V0gsZM4aAG_uQk2CbrdBo2LoGiDgJZGNhGJVEhqbcHwT_S92F_cT-gMSV18SbDetgYcSzPk4cyZCyeryFYFRKPIxFoUNjqKrLAZCe7mXEPCJhq4KXXFjtmQqZSdMyNmErRBQVrKBJccsyuRWnbPswysQYgEPJpQEoEuEMGCYZwtlH4yBY-BSZ7jxt7l-JceWwg7R2Vv68Ae40miwRi2mIMGxi3LUGM3zWALfyrDvUzDcykII1WamQJkIuSMcZkwY_kTPasCNCe7TJ-NmYFYobI-R0lm59CxUhgWE7xmOReyWccNGutO7_XZRKFS8hm4vbZmy4B9xSNEiEutQVoHQK6QjLMc8inoo7Ddn9HsEtJY4EkfGYZlobQdG6T3kisUaLClRrZXUa4SCl-GVEVrVJROGmiixxBwL7kCSYwojRg8V6W00eicIpjyMrMfMEy33Fog6OhnZxxbCYz6ch01qy7bcLeLfTa4SGCUWdj77c7mn6DaPuFxZ9G1kLZd9bsqNSu4MRiphILUW9Vv6x5uetbRyOoScLtayEzxxL8jG4FK6BKR81g7Cj1TwYYT1KxmYMd-x41M1Rt8fdOLeTyHfuCzX6_uB-Te27dkdxCfHgRyuh_k7CCQs_0gw4NAhhsgayTOL7jDLCs61BG3F0qmYoYnlUWCdX6TNDmZ8Qr7RDT6o1l_X5cWaoWF3CvlRpYlbq_rQq0QU2izr-wkGlaMxQo3WIbYKeKm5xhfg01hYu_Y30nMl3SNaP2wPmrcwdxFq5p-cZOQP86Bh5f9cycc-0LH3XhAUkupBuOYivCGCiAanTQZWwvo9C08NBJ28Uj6JXhdfz6gkx_hrr4JXnBsJ1yPqyeo1o_NDRI8XwWn8IHb90R4NBoeRSqdzMHAZqmtoqKcIp3X3MyvyTCXrHV2NlXbllvBqxzbZ9jSoyztVt2BeKev4p0djHf2Kt7wYLzhPjwqSx_m_4XhkPz_GcOv4X0Nw6_hfQ3De_Do01ZHaJ2HV7y_x3Gfq4dbZxbdrLvNwIVzc0G3uneLf2vCqM_oFnIAojp1urZOHfZLS0lXL8Um8UDJBrZt4O0lgOILP8x023uHo9DU1x3heM893N5OQCSnIkMnSS-9Wdu-It5Td3ggs0NcSYcTwebAg7cTR9yPPCvBRalQmYgrZx9PSOW2BBK85LnkEq-iCgWnJ_7jroBoWoosGQudaNW9EJ14suyM0Z8__fW3m4DqxfWs9tuv71vb59YWZjQYzHAWLqf9WOWDK7TjYs7lDPQ7IbmMYTBDUexF4cYeTDM1HdB0OoAlz4sMzMDz9N3ZSc0UPh7jd4hfleKfc_yGOy-o_CAfXmiYx58wzvdzupbskpxUpS1K61O8ZnqzrnYD3O-EpZ0q1lEboM3CdEJXfVhRvFyKTHBdXVLs0ILvfzh3M66ZUd3dQ4ZM4dStGHY89q5EXoHu9AuuEy7VN39KmoBwgBToLw3QbkgveJbTqormSKQzcct-rFiH8vDfDGoe1r7TImG78SbpZGkcQ64VdH3p5kjfLrELkV8PNMdYLjJIbkHnwhg3WIxSnhkaUU05zYXdc5STdw7bOKtjXmiFKSZNllUvD7ohBbYj6MPuQ-SHpzqPxv8-5N7CyZJa7BbONludJvwPn5Qii6UOAAA)

## Source code:

- dapp connection code: [GCScript](Shared%20Treasury%20-%203%20of%204%20signers%20-%20funded%20-%20Gift%20Wallets.gcscript)
- frontend + dapp connection code : [HTML5 dapp](Shared%20Treasury%20-%203%20of%204%20signers%20-%20funded%20-%20Gift%20Wallets.html)

Dapp code was autogenerated by [Playground IDE in GameChanger Wallet ](https://beta-wallet.gamechanger.finance/playground)

## GCScript code (dapp connection):
```json
{
  "type": "script",
  "title": "Shared Treasury - 3 of 4 signers - funded - Gift Wallets",
  "description": "Creates a workspace named 'DAO' with a 'Shared Treasury' address where at least 3 of 4 signer wallets are required for spending and staking operations. A second address on the workspace is caller main address as 'Signer'. To manage the treasury set 'Shared Treasury' address as current. To sign as a member, set 'Signer' address instead.",
  "exportAs": "Dao",
  "return": {
    "mode": "last"
  },
  "run": {
    "wallets": {
      "type": "walletGenerator",
      "amount": 4,
      "defaultNamePattern": "Member {index}",
      "defaultDescriptionPattern": "Wallet for DAO Member #{index}",
      "defaultKeyPattern": "Member_{index}",
      "defaultHintPattern": "Your password is '{password}'",
      "qr": true,
      "download": true
    },
    "addresses": {
      "type": "macro",
      "run": {
        "Member_0": "{getAddressInfo(get('cache.wallets.Member_0.address'))}",
        "Member_1": "{getAddressInfo(get('cache.wallets.Member_1.address'))}",
        "Member_2": "{getAddressInfo(get('cache.wallets.Member_2.address'))}",
        "Member_3": "{getAddressInfo(get('cache.wallets.Member_3.address'))}"
      }
    },
    "walletSetup": {
      "type": "loadConfig",
      "updateId": "Dao",
      "layers": [
        {
          "type": "Workspace",
          "items": [
            {
              "namePattern": "dao",
              "titlePattern": "DAO",
              "descriptionPattern": "Wallet settings that creates a shared treasury of at least 3 of 4 signers for spending and staking operations"
            }
          ]
        },
        {
          "type": "Key",
          "workspaceIds": [
            "dao"
          ],
          "items": [
            {
              "namePattern": "spend-member",
              "kind": "spend",
              "accountIndex": 0,
              "addressIndex": 0
            },
            {
              "namePattern": "stake-member",
              "kind": "stake",
              "accountIndex": 0,
              "addressIndex": 0
            }
          ]
        },
        {
          "type": "NativeScript",
          "workspaceIds": [
            "dao"
          ],
          "namePattern": "dao_{key}_script",
          "items": {
            "spend": {
              "atLeast": 3,
              "ofThese": {
                "Member_0": {
                  "pubKeyHashHex": "{get('cache.addresses.Member_0.paymentKeyHash')}"
                },
                "Member_1": {
                  "pubKeyHashHex": "{get('cache.addresses.Member_1.paymentKeyHash')}"
                },
                "Member_2": {
                  "pubKeyHashHex": "{get('cache.addresses.Member_2.paymentKeyHash')}"
                },
                "Member_3": {
                  "pubKeyHashHex": "{get('cache.addresses.Member_3.paymentKeyHash')}"
                }
              }
            },
            "stake": {
              "atLeast": 3,
              "ofThese": {
                "Member_0": {
                  "pubKeyHashHex": "{get('cache.addresses.Member_0.stakingKeyHash')}"
                },
                "Member_1": {
                  "pubKeyHashHex": "{get('cache.addresses.Member_1.stakingKeyHash')}"
                },
                "Member_2": {
                  "pubKeyHashHex": "{get('cache.addresses.Member_2.stakingKeyHash')}"
                },
                "Member_3": {
                  "pubKeyHashHex": "{get('cache.addresses.Member_3.stakingKeyHash')}"
                }
              }
            }
          }
        },
        {
          "type": "Address",
          "workspaceIds": [
            "dao"
          ],
          "items": [
            {
              "namePattern": "Signer",
              "spendPubKeyName": "spend-member",
              "stakePubKeyName": "stake-member"
            },
            {
              "namePattern": "Shared Treasury",
              "spendNativeScriptName": "dao_spend_script",
              "stakeNativeScriptName": "dao_stake_script"
            }
          ]
        }
      ]
    },
    "setWorkspace": {
      "type": "setCurrentWorkspace",
      "workspaceId": "dao"
    },
    "workspaceAddresses": {
      "type": "getAddresses",
      "filter": {
        "name": "Shared Treasury"
      },
      "keyPattern": "dao_address"
    },
    "assets": {
      "type": "data",
      "value": [
        {
          "policyId": "ada",
          "assetName": "ada",
          "quantity": "10000000"
        }
      ]
    },
    "buildAirdrop": {
      "type": "buildTx",
      "title": "üíù DAO Airdrop",
      "returnURLPattern": "https://github.com/GameChangerFinance/gamechanger.wallet/blob/main/examples/Shared%20Treasury%20-%203%20of%204%20signers%20-%20funded%20-%20Gift%20Wallets.md",
      "tx": {
        "outputs": [
          {
            "address": "{get('cache.workspaceAddresses.dao_address.address')}",
            "assets": "{get('cache.assets')}"
          }
        ],
        "auxiliaryData": {
          "674": {
            "msg": [
              "Welcome to The Future of Cardano!\n",
              "Multisigs in the palm of your hand\n",
              "By GameChanger Wallet\n"
            ]
          }
        }
      }
    },
    "signAirdrop": {
      "type": "signTxs",
      "txs": [
        "{get('cache.buildAirdrop.txHex')}"
      ],
      "detailedPermissions": false
    },
    "submitAirdrop": {
      "type": "submitTxs",
      "txs": "{get('cache.signAirdrop')}"
    },
    "finally": {
      "type": "macro",
      "run": {
        "signers": "{get('cache.wallets')}",
        "sharedTreasuryAddress": "{get('cache.workspaceAddresses.dao_address.address')}",
        "airdropTxHash": "{get('cache.buildAirdrop.txHash')}"
      }
    }
  }
}
```

## Run standalone QR dapp connection: 

You can use [Playground IDE in GameChanger Wallet ](https://beta-wallet.gamechanger.finance/playground) in `QR URL Transport` mode to capture results

[![This GCScript/URL is too large! make it shorter uploading parts to GCFS. Unable to generate QR code](Shared%20Treasury%20-%203%20of%204%20signers%20-%20funded%20-%20Gift%20Wallets.png)](https://gamechangerfinance.github.io/gamechanger.wallet/examples/Shared%20Treasury%20-%203%20of%204%20signers%20-%20funded%20-%20Gift%20Wallets.png)

## Resources
- [Github Docs and examples](https://github.com/GameChangerFinance/gamechanger.wallet/)
- [GCScript documentation](https://beta-wallet.gamechanger.finance/doc/api/v2/api.html)
- [Playground IDE in GameChanger Wallet ](https://beta-wallet.gamechanger.finance/playground)
- [Youtube Tutorials](https://www.youtube.com/@gamechanger.finance)
- [Discord Support](https://discord.gg/vpbfyRaDKG)
- [Twitter News](https://twitter.com/GameChangerOk)
- [Website](https://gamechanger.finance)

## License
MIT 
    
