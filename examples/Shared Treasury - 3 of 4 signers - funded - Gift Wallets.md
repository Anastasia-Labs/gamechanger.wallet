
# Cardano Example Dapp

## **Shared Treasury - 3 of 4 signers - funded - Gift Wallets**

Creates a workspace named 'DAO' with a 'Shared Treasury' address where at least 3 of 4 signer Gift wallets are required for spending and staking operations. A second address on the workspace is caller main address as 'Signer'. To manage the treasury set 'Shared Treasury' address as current. To sign as a member, set 'Signer' address instead. Customize Gift Wallet generation with proper password settings and distribute them to the signers. This example is not secure as wallet creator has total control over the generated wallets. Please use 'saveConfig' function to save this setup on GCFS to avoid losing funds and data


## Try it online: 

-  Visit [HTML5 Dapp](https://gamechangerfinance.github.io/gamechanger.wallet/examples/Shared%20Treasury%20-%203%20of%204%20signers%20-%20funded%20-%20Gift%20Wallets.html)
-  Run [Standalone URL dapp connection](https://beta-wallet.gamechanger.finance/api/2/run/1-H4sIAAAAAAAAA7VW604rNxB-FXerKq0ECRxQK-VfGsRFPecUFSpUtQg5u5OshddefIGkUV6i_6u-Yh-hM7Y3u0kAHU5bpCW74_HnmW8unmXmFjVkw8zmRtQu28uccJIEVyU3ULBrA9x6s2D77IjpKTtmVswUGIuCqVcFquyzMzF17IZLCc4iRAERTWiFQGNEcGAZZ0_a3Nua58AUr3Bj72T0Y489CVfiYm_rwB7jRWHAWvZUggHGHZO44jbNiEc_xaMZAjADD14Q0FQbZmtQhVAzxlXBrOP39K5rMJyMs302YhZyjYvNYVoxV0LHVGFZTvCGVVyotR63aHEwoddn1xoXFZ9B2Osayiy4V9xChNwbA8oFAPKHZJxVUE3A7KXt8Yz1LqGsA1702dhbpyvxO3TZZzNQybnIa23IW1Zza9GlgjAdcmADIYWwzoiJd8Huijkd7E8BRqtKdB7mvKpl4EFpR3R5ioZNpLOcwotUlyhy2nHJkE9ntGT6EU8mwGQUspAC1WeXFEtgHp-e5Y8w1moqZj1KqTxYj7aQHPfjwWi1ryk0Z-PTK1rij1oUTGpL8aQ0TA5xxzH_YF5r40YWk--EaxQY3G8wF5dZpQtKbomJlK1wwQdpMoteUzlEyVk0XBvE4JX2ymXDY8rvKffSfcQkvuTOAUFnH0LU2FJgTcxX2VrrpC2GVjlFi1IUa4ClvV_ubP4BFtsn3O0onQvlWq1ftO_EG8nrLZuvVQ83PZhs6IwH3K6flNS8aL5h7gyPH0hNZOCKmO_wQvoxVgjlayQcLoo1z5IvMHGy4a9r_ZumjnBVOKjiotpgrgh7Q99phUjLZifZIW-dyq7kKQ1Dl7Gx4NZViN3i-d5hP6VFZKvb1d7aHYwHWrVuDhcF-RMcuH3Zv3DCfqxq3I0HFI2U8irPKbEuKKjZ8AAFsdIbAZ2-hYdGwi4eST8Fr-vPR3TyEa6a3v-CYzvhulvew2J1t74zkufL5BS-cPeeCM-GR3uZnl6XYIHEKYUP6L32E6TznNvynAzLljNwX_dynpfQb_pEo98PwK1675sVlW9aPnwj3OHrcO_eCPfudbijN8IdPQu3QsAY4v-DXQL-D9l9De4z2H0N7jPYfQaO_tqqGMWKeXulx8sa94UIXgar6JbYbQLBiE2FblXvFv3WGNGc0S3gBET1Gdba-gzYL6nSWqOKzeGWEg1c27jb5o_icZxYum29w1Fq5quOMHEJ3csVo9OK97KpkOgkrato1raviHffvQjJ7NTVaA1vt83LO40Bj1x6CFGqtRT5ItjHC1oKWxIJUfLgucIraIGCw4P4F1p_NvFCFiNhCpykOmcE8fW8MzD__dcff4bbvFFu5o6ff3rf2l46V9vhYDDD6cxP-rmuBmdox7jkagbmVCiuchjMUJRHUUrgwUTqyYBG0EGayOwg8vTVu4OGKXzdx-cIHz3Ff8f4pLsuLcWRPX3Q4Ig_aXDvV3QduTk5qb2rvYsp3jC9VVY7Ae53wtJPv1RcbYA2AKIwVB9WFPdzIQU3ixOKHVrw7XfHYV6zM6q7G5DIFNDoh92OnXpHQyje5WNuCq70F78pPOcDDkMC_aUpOQyeNZcVaS1oJkI6i6D2_YJ1KE-TM67crmKXRcJ2403S67kNDIVW0PWlmyN9N09d5ZbmF8eFhOISTCWsDQPFcMqlpQnL-kkl3DNHBXnnsI2zOualTjjFpJFy0UGoeG7C3BvH25QCzzfGGKI4NDV5NPr3IY8WXs-py27hbLOFGk0T_gdgAxqmjw4AAA)

## Source code:

- dapp connection code: [GCScript DSL](Shared%20Treasury%20-%203%20of%204%20signers%20-%20funded%20-%20Gift%20Wallets.gcscript)
- frontend (using @gamechanger-finance/gc): [HTML5 dapp](Shared%20Treasury%20-%203%20of%204%20signers%20-%20funded%20-%20Gift%20Wallets.html)
- frontend (without official library): [Native HTML5 dapp](Shared%20Treasury%20-%203%20of%204%20signers%20-%20funded%20-%20Gift%20Wallets_nolib.html)

Dapp code was autogenerated by [Playground IDE in GameChanger Wallet ](https://beta-wallet.gamechanger.finance/playground)

## GCScript code (dapp connection):
```json
{
  "type": "script",
  "title": "Shared Treasury - 3 of 4 signers - funded - Gift Wallets",
  "description": "Creates a workspace named 'DAO' with a 'Shared Treasury' address where at least 3 of 4 signer Gift wallets are required for spending and staking operations. A second address on the workspace is caller main address as 'Signer'. To manage the treasury set 'Shared Treasury' address as current. To sign as a member, set 'Signer' address instead. Customize Gift Wallet generation with proper password settings and distribute them to the signers. This example is not secure as wallet creator has total control over the generated wallets. Please use 'saveConfig' function to save this setup on GCFS to avoid losing funds and data",
  "exportAs": "Dao",
  "return": {
    "mode": "last"
  },
  "run": {
    "wallets": {
      "type": "walletGenerator",
      "amount": 4,
      "defaultNamePattern": "Member {index}",
      "defaultDescriptionPattern": "Wallet for DAO Member #{index}",
      "defaultKeyPattern": "Member_{index}",
      "defaultHintPattern": "Your password is '{password}'",
      "qr": true,
      "download": true,
      "extra": true
    },
    "walletSetup": {
      "type": "loadConfig",
      "updateId": "Dao",
      "layers": [
        {
          "type": "Workspace",
          "items": [
            {
              "namePattern": "dao",
              "titlePattern": "DAO",
              "descriptionPattern": "Wallet settings that creates a shared treasury of at least 3 of 4 signers for spending and staking operations"
            }
          ]
        },
        {
          "type": "Key",
          "workspaceIds": [
            "dao"
          ],
          "items": [
            {
              "namePattern": "spend-member",
              "kind": "spend",
              "accountIndex": 0,
              "addressIndex": 0
            },
            {
              "namePattern": "stake-member",
              "kind": "stake",
              "accountIndex": 0,
              "addressIndex": 0
            }
          ]
        },
        {
          "type": "NativeScript",
          "workspaceIds": [
            "dao"
          ],
          "namePattern": "dao_{key}_script",
          "items": {
            "spend": {
              "atLeast": 3,
              "ofThese": {
                "Member_0": {
                  "pubKeyHashHex": "{get('cache.wallets.Member_0.spendKeyHashHex')}"
                },
                "Member_1": {
                  "pubKeyHashHex": "{get('cache.wallets.Member_1.spendKeyHashHex')}"
                },
                "Member_2": {
                  "pubKeyHashHex": "{get('cache.wallets.Member_2.spendKeyHashHex')}"
                },
                "Member_3": {
                  "pubKeyHashHex": "{get('cache.wallets.Member_3.spendKeyHashHex')}"
                }
              }
            },
            "stake": {
              "atLeast": 3,
              "ofThese": {
                "Member_0": {
                  "pubKeyHashHex": "{get('cache.wallets.Member_0.stakeKeyHashHex')}"
                },
                "Member_1": {
                  "pubKeyHashHex": "{get('cache.wallets.Member_1.stakeKeyHashHex')}"
                },
                "Member_2": {
                  "pubKeyHashHex": "{get('cache.wallets.Member_2.stakeKeyHashHex')}"
                },
                "Member_3": {
                  "pubKeyHashHex": "{get('cache.wallets.Member_3.stakeKeyHashHex')}"
                }
              }
            }
          }
        },
        {
          "type": "Address",
          "workspaceIds": [
            "dao"
          ],
          "items": [
            {
              "namePattern": "Signer",
              "spendPubKeyName": "spend-member",
              "stakePubKeyName": "stake-member"
            },
            {
              "namePattern": "Shared Treasury",
              "spendNativeScriptName": "dao_spend_script",
              "stakeNativeScriptName": "dao_stake_script"
            }
          ]
        }
      ]
    },
    "setWorkspace": {
      "type": "setCurrentWorkspace",
      "workspaceId": "dao"
    },
    "workspaceAddresses": {
      "type": "getAddresses",
      "filter": {
        "name": "Shared Treasury"
      },
      "keyPattern": "dao_address"
    },
    "assets": {
      "type": "data",
      "value": [
        {
          "policyId": "ada",
          "assetName": "ada",
          "quantity": "10000000"
        }
      ]
    },
    "buildAirdrop": {
      "type": "buildTx",
      "title": "üíù DAO Airdrop",
      "returnURLPattern": "https://github.com/GameChangerFinance/gamechanger.wallet/blob/main/examples/Shared%20Treasury%20-%203%20of%204%20signers%20-%20funded%20-%20Gift%20Wallets.md",
      "tx": {
        "outputs": [
          {
            "address": "{get('cache.workspaceAddresses.dao_address.address')}",
            "assets": "{get('cache.assets')}"
          }
        ],
        "auxiliaryData": {
          "674": {
            "msg": [
              "Welcome to The Future of Cardano!\n",
              "Multisigs in the palm of your hand\n",
              "By GameChanger Wallet\n"
            ]
          }
        }
      }
    },
    "signAirdrop": {
      "type": "signTxs",
      "txs": [
        "{get('cache.buildAirdrop.txHex')}"
      ],
      "detailedPermissions": false
    },
    "submitAirdrop": {
      "type": "submitTxs",
      "txs": "{get('cache.signAirdrop')}"
    },
    "finally": {
      "type": "macro",
      "run": {
        "signers": "{get('cache.wallets')}",
        "sharedTreasuryAddress": "{get('cache.workspaceAddresses.dao_address.address')}",
        "airdropTxHash": "{get('cache.buildAirdrop.txHash')}"
      }
    }
  }
}
```

## Run standalone QR dapp connection: 

You can use [Playground IDE in GameChanger Wallet ](https://beta-wallet.gamechanger.finance/playground) in `QR URL Transport` mode to capture results

[![This GCScript/URL is too large! make it shorter uploading parts to GCFS. Unable to generate QR code](Shared%20Treasury%20-%203%20of%204%20signers%20-%20funded%20-%20Gift%20Wallets.png)](https://gamechangerfinance.github.io/gamechanger.wallet/examples/Shared%20Treasury%20-%203%20of%204%20signers%20-%20funded%20-%20Gift%20Wallets.png)

## Resources
- [How to connect?](https://www.npmjs.com/package/@gamechanger-finance/gc)
- [Docs and examples on Github](https://github.com/GameChangerFinance/gamechanger.wallet/)
- [GCScript documentation](https://beta-wallet.gamechanger.finance/doc/api/v2)
- [Playground IDE in GameChanger Wallet ](https://beta-wallet.gamechanger.finance/playground)
- [Tutorials on Youtube](https://www.youtube.com/@gamechanger.finance)
- [Support on Discord](https://discord.gg/vpbfyRaDKG)
- [News on Twitter](https://twitter.com/GameChangerOk)
- [Website](https://gamechanger.finance)

## License
MIT 
    
